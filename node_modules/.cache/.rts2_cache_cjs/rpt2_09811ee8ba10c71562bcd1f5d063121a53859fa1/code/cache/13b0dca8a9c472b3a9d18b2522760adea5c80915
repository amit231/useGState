{"code":"import React, { useCallback, useContext, useEffect, useState } from 'react';\r\nconst StoreContext = React.createContext({});\r\nconst store = {\r\n    current: {}\r\n};\r\nconst GStateContextProvider = StoreContext.Provider;\r\nconst useGState = (gState) => {\r\n    const { get, set, subscribe, unsubscribe } = useContext(StoreContext);\r\n    const [state, setState] = useState(gState.value);\r\n    const setter = useCallback((val) => {\r\n        set?.(gState.key, val);\r\n    }, []);\r\n    useEffect(() => {\r\n        const subscriber = () => {\r\n            const updatedState = get?.(gState.key);\r\n            setState(() => updatedState);\r\n        };\r\n        subscribe?.(subscriber);\r\n        return () => {\r\n            unsubscribe?.(subscriber);\r\n        };\r\n    }, []);\r\n    return [state, setter];\r\n};\r\nlet gStateCnt = 0;\r\nconst gState = (value) => {\r\n    const key = `gState#${++gStateCnt}`;\r\n    store.current[key] = value;\r\n    return { key, value };\r\n};\r\nexport default useGState;\r\nconst premetiveTypes = ['number', 'string', 'bigInt', 'boolean'];\r\nconst GStateProvider = ({ children }) => {\r\n    const get = React.useCallback((a) => {\r\n        return store.current[a];\r\n    }, []);\r\n    const set = React.useCallback((a, val) => {\r\n        if (premetiveTypes.includes(typeof val)) {\r\n            store.current[a] = val;\r\n        }\r\n        else {\r\n            store.current[a] = { ...store.current[a], ...val };\r\n        }\r\n        subs.current.forEach(sub => sub());\r\n    }, []);\r\n    const subs = React.useRef(new Set());\r\n    const subscribe = React.useCallback((fn) => {\r\n        subs.current.add(fn);\r\n    }, []);\r\n    const unsubscribe = React.useCallback((fn) => {\r\n        subs.current.delete(fn);\r\n    }, []);\r\n    return (React.createElement(GStateContextProvider, { value: { get, set, subscribe, unsubscribe } }, children));\r\n};\r\nexport { GStateProvider, gState };\r\n//# sourceMappingURL=index.js.map","references":["/home/amit/Frontend/usegstate/node_modules/@types/react/index.d.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/index.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/amit/Frontend/usegstate/index.d.ts","writeByteOrderMark":false,"text":"interface IgState {\r\n    key: string;\r\n    value: any;\r\n}\r\ndeclare const useGState: (gState: IgState) => any[];\r\ndeclare const gState: (value: any) => IgState;\r\nexport default useGState;\r\ndeclare const GStateProvider: ({ children }: {\r\n    children: JSX.Element;\r\n}) => JSX.Element;\r\nexport { GStateProvider, gState };\r\n"}}
